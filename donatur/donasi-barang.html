<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulir Donasi Barang - Panti Wredha Budi Dharma Kasih</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inknut+Antiqua:wght@700&family=Poppins:ital,wght@0,300;0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="../assets/css/style-donatur.css">

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body>
    <div id="donasiApp" v-cloak>

        <nav class="navbar navbar-expand-lg sticky-top" data-bs-theme="dark">
            <div class="container-fluid px-4">
                <a class="navbar-brand" href="../index.html">
                    <img src="../assets/images/1.png" alt="Logo Panti Wredha">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item"><a class="nav-link" href="../index.html">BERANDA</a></li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">PROFIL</a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="sejarah.html">Sejarah Singkat</a></li>
                                <li><a class="dropdown-item" href="visi-misi.html">Visi & Misi</a></li>
                                <li><a class="dropdown-item" href="fasilitas.html">Fasilitas</a></li>
                                <li><a class="dropdown-item" href="persyaratan.html">Persyaratan Calon Penghuni</a></li>
                            </ul>
                        </li>
                        <li class="nav-item"><a class="nav-link active" href="donasi.html">DONASI</a></li>
                        <li class="nav-item"><a class="nav-link" href="kontak.html">KONTAK</a></li>
                    </ul>
                </div>

                <div class="nav-actions d-flex align-items-center ms-lg-auto">
                    <a href="../donatur/notifikasi.html" class="notif-icon" title="Notifikasi">
                        <img src="../assets/images/3.png" alt="Notifikasi">
                    </a>

                    <div v-if="isLoggedIn" class="d-flex align-items-center gap-2">
                        <span class="text-white fw-bold">Hi, {{ currentUser.username }}</span>
                        <button @click="showLogoutModal" class="btn btn-sm btn-danger rounded-pill px-3">Logout</button>
                    </div>
                    <a v-else href="../auth/login.html" class="cta-button primary">LOGIN</a>
                </div>
            </div>
        </nav>

        <main class="content-wrapper" style="background-color: var(--color-light-bg);">
            
            <section class="page-header py-5 text-center">
                <div class="container">
                    <h1 class="main-title">Formulir Donasi Barang</h1>
                </div>
            </section>

            <section class="pb-5">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-8">
                            
                            <div class="form-donasi-box">
                                <form @submit.prevent="kirimDonasi" novalidate>
                                    
                                    <div class="mb-3">
                                        <label class="form-label">Nama Donatur</label>
                                        <input type="text" class="form-control" v-model="form.nama" readonly>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">Nomor HP</label>
                                        <input type="tel" class="form-control" :class="{ 'is-invalid': errors.hp }" v-model="form.hp" placeholder="+62-812-xxxx-xxxx">
                                        <div class="invalid-feedback" v-if="errors.hp">{{ errors.hp }}</div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">Gmail (Opsional)</label>
                                        <input type="email" class="form-control" :class="{ 'is-invalid': errors.email }" v-model="form.email">
                                        <div class="invalid-feedback" v-if="errors.email">{{ errors.email }}</div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">Kategori Barang</label>
                                        <select class="form-select" v-model="form.kategori">
                                            <option value="" disabled selected>-- Pilih Kategori --</option>
                                            <option>Sembako</option>
                                            <option>Pakaian</option>
                                            <option>Alat Kebersihan</option>
                                            <option>Alat Kesehatan</option>
                                            <option>Peralatan Rumah Tangga</option>
                                            <option>Elektronik</option>
                                            <option>Perlengkapan Tidur</option>
                                            <option>Buku & Hiburan</option>
                                            <option>Perlengkapan Medis</option>
                                        </select>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">Nama Barang / Detail*</label>
                                        <input type="text" class="form-control" :class="{ 'is-invalid': errors.barang }" v-model="form.barang" placeholder="Contoh: Beras, Mie Instan, Baju Layak Pakai">
                                        <div class="invalid-feedback" v-if="errors.barang">{{ errors.barang }}</div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label fw-bold">Upload Foto Barang / Resi Pengiriman *</label>
                                        <input type="file" class="form-control" :class="{ 'is-invalid': errors.fileBukti }" @change="handleFileUpload" accept="image/*">
                                        <div class="invalid-feedback" v-if="errors.fileBukti">{{ errors.fileBukti }}</div>
                                        <div class="form-text text-light opacity-75">Foto barang atau resi wajib dilampirkan sebagai verifikasi.</div>
                                        
                                        <div v-if="form.fileBukti" class="mt-2">
                                            <img :src="form.fileBukti" style="max-height: 150px; border-radius: 8px; border: 2px solid white;">
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">Catatan</label>
                                        <textarea class="form-control" v-model="form.catatan" rows="3"></textarea>
                                    </div>

                                    <div class="text-end mt-4">
                                        <button type="submit" class="btn btn-kirim">Kirim</button>
                                    </div>

                                </form>
                            </div>

                            <div class="map-info-box text-center mt-5">
                                <p class="mb-2">Klik Link Google Maps berikut untuk mengirim atau mengantar donasi anda</p>
                                <a href="https://maps.google.com" target="_blank">Lihat Lokasi di Google Maps</a>
                                <p class="mt-3 mb-0">Panti Wreda Budi Dharma Kasih<br>Purbalingga, Jawa Tengah</p>
                            </div>

                        </div>
                    </div>
                </div>
            </section>
        </main>

        <div class="modal fade" id="modalSuccess" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered modal-berhasil"> 
                <div class="modal-content">
                    <div class="modal-header d-flex justify-content-end border-0 pb-0">
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body pt-0 text-center">
                        <div class="modal-icon-circle"><i class="fas fa-check"></i></div>
                        <h4 class="modal-title">Donasi Anda Berhasil Kami Terima</h4>    
                        <p class="modal-quote">⭐"Terima Kasih Telah Menjadi Cahaya"⭐</p>       
                        <p>Terima kasih {{ form.nama || 'Kakak Baik' }}, Admin kami akan memverifikasi kiriman Anda.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="logoutModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content border-0 shadow">
                    <div class="modal-header border-0">
                        <h5 class="modal-title fw-bold text-danger">Konfirmasi Keluar</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body text-center py-4">
                        <i class="fas fa-sign-out-alt fa-3x text-danger mb-3"></i>
                        <p class="mb-0 fw-medium fs-5">Apakah Anda yakin ingin keluar?</p>
                    </div>
                    <div class="modal-footer border-0 justify-content-center pb-4">
                        <button type="button" class="btn btn-secondary rounded-pill px-4" data-bs-dismiss="modal">Batal</button>
                        <button type="button" class="btn btn-danger rounded-pill px-4" @click="confirmLogout">Ya, Keluar</button>
                    </div>
                </div>
            </div>
        </div>

        <footer class="footer-new">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 col-md-6 footer-brand-desc">
                        <h2>Panti Wredha BDK</h2>
                        <p class="footer-text">"Kasih Kristus Untuk Semua" Melayani dan mendampingi para lansia menjalani hari tua dengan penuh makna.</p>
                        
                        <div class="footer-search">
                            <form @submit.prevent="performSearch">
                                <input type="text" v-model="searchQuery" placeholder="Cari informasi di halaman ini..." required>
                                <button type="submit"><i class="fas fa-search"></i></button>
                            </form>
                        </div>
                    </div>
                <div class="footer-copyright">
                    <p class="m-0">© 2025 Yayasan Panti Wredha Budi Dharma Kasih. All Rights Reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script src="../assets/js/donasi-barang.js"></script>
</body>
</html>